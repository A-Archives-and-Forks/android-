<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Setup - Nearby Sharing</title>

    <script type="module">
        // @ts-check
        import {
            provideFluentDesignSystem,
            fluentButton,
            fluentCard,
            fluentTab, fluentTabs, fluentTabPanel
        } from "https://unpkg.com/@fluentui/web-components@2.0.0";

        provideFluentDesignSystem().register(
            fluentCard(),
            fluentButton(),
            fluentTab(), fluentTabs(), fluentTabPanel()
        );
    </script>

    <script>
        // @ts-check

        /**
         *
         * @param {string} url
         */
        function openSettings(url) {
            const a = document.createElement("a");
            a.href = url;
            a.click();

            goNext();
        }

        function doCancel() {
            window.close();
        }

        function goNext() {
            const { activeid, activeTabIndex, tabs } = document.querySelector("#tabs");

            if (nextRadio(document.querySelector(`#${activeid}Panel`)))
                return;

            const nextTab = tabs[activeTabIndex + 1];
            if (nextTab == null) {
                doCancel();
                return;
            }

            nextTab.click();
            nextRadio(document.querySelector(`#${nextTab.id}Panel`), true);
        }

        function nextRadio(activeTabPanel, forceFirst = false) {
            const radioGroup = activeTabPanel.querySelector("fluent-radio-group");
            if (radioGroup != null) {
                let nextRadio = radioGroup.querySelector("fluent-radio");

                const activeRadio = radioGroup.querySelector(".checked");
                if (!forceFirst && activeRadio != null) {
                    nextRadio = activeRadio.nextElementSibling;
                }

                if (nextRadio != null) {
                    nextRadio.click();
                    return true;
                }
            }
            return false;
        }
    </script>

    <style>
        body {
            background: #B1B1B1;
            font-family: var(--body-font);
        }

        h1 {
            margin: 0px;
            margin-top: 32px;
            margin-bottom: 12px;
        }

        .main {
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            --margin-x: 50px;
            --margin-y: var(--margin-x);
            --card-width: clamp(0px, calc(100% - var(--margin-x) * 2), 1000px);
            --card-height: clamp(0px, calc(100% - var(--margin-y) * 2), 500px);
        }

            .main > .content {
                flex-grow: 1;
                padding: 22px;
            }

            .main > .bottom {
                background: #F3F3F3;
                border-top: 1px solid #E5E5E5;
                padding: 20px;
                display: flex;
                flex-direction: row;
                justify-content: end;
            }
    </style>

    <style>
        .ol-steps {
            list-style-image: radial-gradient(transparent 40%, #0068BD 40%, #0068BD 70%, transparent 70%);
        }
    </style>
</head>
<body>

    <fluent-card class="main">
        <div class="content">
            <fluent-tabs id="tabs" activeid="Start">
                <fluent-tab id="Start">Start</fluent-tab>
                <fluent-tab id="EnableBluetooth">Enable <q>Bluetooth</q></fluent-tab>
                <fluent-tab id="EnableNearShare">Enable <q>Nearby Sharing</q></fluent-tab>
                <fluent-tab id="SetNetworkPrivate">Set network to <q>private</q></fluent-tab>
                <fluent-tab id="Ready">Ready</fluent-tab>

                <fluent-tab-panel id="StartPanel">
                    <h1>Setup <q>Nearby Sharing</q> for Window</h1>
                    <div style="display: flex; justify-content: center; align-items: center;">
                        <img src="https://nearshare.shortdev.de/docs/icon.svg" style="max-height: 150px;" />
                    </div>
                </fluent-tab-panel>
                <fluent-tab-panel id="EnableBluetoothPanel">
                    <h1>Enable <q>Bluetooth</q></h1>
                    <p>
                        <fluent-radio-group orientation="vertical">
                            <fluent-radio>
                                <fluent-button onclick="openSettings('ms-settings:bluetooth');">Open settings</fluent-button>
                            </fluent-radio>
                            <fluent-radio>
                                Enable <q>Bluetooth</q>
                            </fluent-radio>
                        </fluent-radio-group>
                    </p>
                </fluent-tab-panel>
                <fluent-tab-panel id="EnableNearSharePanel">
                    <h1>Enable <q>Nearby Sharing</q></h1>
                    <p>
                        <fluent-radio-group orientation="vertical">
                            <fluent-radio>
                                <fluent-button onclick="openSettings('ms-settings:crossdevice');">Open settings</fluent-button>
                            </fluent-radio>
                            <fluent-radio>
                                Enable <q>Nearby sharing</q>
                            </fluent-radio>
                            <fluent-radio>
                                Set <q>I can share or receive content from</q> to <br />
                                <q>Everyone nearby</q>
                            </fluent-radio>
                        </fluent-radio-group>
                    </p>
                </fluent-tab-panel>
                <fluent-tab-panel id="SetNetworkPrivatePanel">
                    <h1>Set network to <q>private</q></h1>
                    <p>
                        <fluent-radio-group orientation="vertical">
                            <fluent-radio>
                                <fluent-button onclick="openSettings('ms-settings:network');">Open settings</fluent-button>
                            </fluent-radio>
                            <fluent-radio>
                                Open <q>Properties</q> for you current network
                            </fluent-radio>
                            <fluent-radio>
                                Select <q>Private</q>
                            </fluent-radio>
                        </fluent-radio-group>
                    </p>
                </fluent-tab-panel>
                <fluent-tab-panel id="ReadyPanel">
                    <h1>Ready - start sharing!</h1>
                    <div style="display: flex; justify-content: center; align-items: center;">
                        <img src="https://nearshare.shortdev.de/docs/icon.svg" style="max-height: 150px;" />
                    </div>
                </fluent-tab-panel>
            </fluent-tabs>

        </div>
        <div class="bottom">
            <div>
                <fluent-button onclick="doCancel();">Cancel</fluent-button>
                <fluent-button onclick="goNext();" appearance="accent">Next</fluent-button>
            </div>
        </div>
    </fluent-card>

</body>
</html>